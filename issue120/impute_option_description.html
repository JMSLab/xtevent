<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>impute_option_description</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
<style>
/* CSS for Markstat 2.0 using Pandoc 2.0 */
body{padding:14px 28px; max-width:45em;}
body, table {font-family: Helvetica, Arial, Sans-serif; font-size: 14px;}
h1, h2, h3, h4 {font-weight: normal; color: #3366cc}
h1 {font-size: 200%;}
h2 {font-size: 150%;}
h3 {font-size: 120%;}
h4 {font-size: 100%; font-weight:bold}
img.center {display:block; margin-left:auto; margin-right:auto}
.small{font-size:8pt;}
a {color: black;}
a:visited {color: #808080;}
a.plain {text-decoration:none;}
a.plain:hover {text-decoration:underline;}
.em {font-weight:bold;}
pre, code {font-family: "lucida console", monospace;}
pre.stata {font-size:13px; line-height:13px;}
pre {padding:8px; border:1px solid #c0c0c0; border-radius:8px; background-color:#fdfdfd;}
code {color:#3366cc; background-color:#fafafa;}
pre code { color:black; background-color:white}
/* Added for Pandoc */
figure > img, div.figure > img {display:block; margin:auto}
figcaption, p.caption {text-align:center; font-weight:bold; color:#3366cc;}
h1.title {text-align:center; margin-bottom:0}
p.author, h2.author {font-style:italic; text-align:center;margin-top:4px;margin-bottom:0}
p.date, h3.date {text-align:center;margin-top:4px; margin-bottom:0}
/* Tables*/
table { margin:auto; border-collapse:collapse; }
table caption { margin-bottom:1ex;}
td {padding:0 0 0 0} /* override */
table:not([class]) th { padding:4px 6px } 
table:not([class]) td { padding:4px 6px } 
table:not([class]) thead tr:first-child th {border-top:1px solid black; padding-top:6px}
table:not([class]) thead tr:last-child  th {padding-bottom:6px}
table:not([class]) tbody tr:first-child td {border-top:1px solid black; padding-top:6px}
table:not([class]) tbody tr:last-child  td {padding-bottom:6px;}
table:not([class]) tbody:last-child tr:last-child td {border-bottom:1px solid black;}
</style>
</head>
<body>
<h1 id="impute-option">Impute option</h1>
<p><strong>impute(type, [saveimp])</strong> imputes missing values in
<em>policyvar</em> and uses this new variable as the actual
<em>policyvar</em>. <strong>type</strong> determines the imputation
rule. The suboption <strong>saveimp</strong> adds the new variable to
the database as <em>policyvar_imputed</em>. The following imputation
types can be implemented:</p>
<ul>
<li><p><strong>impute(nuchange)</strong> imputes missing values in
<em>policyvar</em> according to <em>no-unobserved change</em>: it
assumes that, for each unit: i) in periods before the first observed
value, the policy value is the same as the first observed value; and ii)
in periods after the last observed value, the policy value is the same
as the last observed value.</p></li>
<li><p><strong>impute(stag)</strong> applies <em>no-unobserved
change</em> if <em>policyvar</em> satisfies staggered-adoption
assumptions for all units: i) <em>policyvar</em> must be binary; and ii)
once <em>policyvar</em> reaches the adopted-policy state, it never
reverts to the unadopted-policy state. See <a
href="https://www.nber.org/papers/w29170">Freyaldenhoven et
al. (2021)</a> for detailed explanation of the staggered case.
Additionally in the <em>policyvar</em>, for each unit: i) the
first-observed value must be the unadopted-policy-state value, and the
last-observed value must be the adopted-policy-state value; or ii) all
policy values in the observed data range must be either
adopted-policy-state values or unadopted-policy-state values.</p></li>
<li><p><strong>impute(instag)</strong> applies
<strong>impute(stag)</strong> and additionally imputes missing values
inside the observed data range: a missing value or a group of them will
be imputed only if they are both preceded and followed by the
unadopted-policy state or by the adopted-policy state.</p></li>
</ul>
<h2 id="examples">Examples</h2>
<p>Let’s see some examples of the different imputation rules of the
<strong>impute</strong> option. We want to estimate dynamic effects of
being a union member on the wage. We will use the National Longitudinal
Survey.</p>
<pre class='stata'>. webuse nlswork, clear
(National Longitudinal Survey.  Young Women 14-26 years of age in 1968)
</pre>
<p>This dataset has many missing observations. For the example, we will
create a time variable that ignores these gaps.</p>
<pre class='stata'>. by idcode (year): gen time=_n

. xtset idcode time
       panel variable:  idcode (unbalanced)
        time variable:  time, 1 to 15
                delta:  1 unit
</pre>
<p>For several units, the <em>policyvar</em> <em>union</em> reverts to
the unadopted-policy-state. Let’s generate a <em>policyvar</em> that
follows staggered-adoption.</p>
<pre class='stata'>. by idcode (time): gen union2=sum(union)

. replace union2=1 if union2>1 
(4,177 real changes made)

. order time union union2, after(year)
</pre>
<p>Let’s add some missing values for the example and see how the
<em>policyvar</em> looks for unit 2.</p>
<pre class='stata'>. replace union2=. if idcode==2 &amp; inlist(time, 1,8,9,11,12)
(5 real changes made, 5 to missing)

. list idcode time union2 if idcode==2, noobs

  ┌────────────────────────┐
  │ idcode   time   union2 │
  ├────────────────────────┤
  │      2      1        . │
  │      2      2        0 │
  │      2      3        0 │
  │      2      4        0 │
  │      2      5        1 │
  ├────────────────────────┤
  │      2      6        1 │
  │      2      7        1 │
  │      2      8        . │
  │      2      9        . │
  │      2     10        1 │
  ├────────────────────────┤
  │      2     11        . │
  │      2     12        . │
  └────────────────────────┘
</pre>
<h4 id="nuchange">nuchange</h4>
<p>Now, let’s estimate an event-study where we will impute outer missing
values in the <em>policyvar</em> without verifying staggered-adoption,
i.e., according to <strong>nuchange</strong>. We also want to add the
new <em>policyvar</em> to the database by the <strong>saveimp</strong>
suboption.</p>
<pre class='stata'>. xtevent ln_w age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure , ///
>     policyvar(union2) window(3) impute(nuchange, saveimp)

Using options panelvar and timevar from xtset

No proxy or instruments provided. Implementing OLS estimator

Linear regression, absorbing indicators         Number of obs     =     22,877
Absorbed variable: idcode                       No. of categories =      2,694
                                                F(  27,  20156)   =     174.19
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6701
                                                Adj R-squared     =     0.6256
                                                Root MSE          =     0.2851

────────────────────┬────────────────────────────────────────────────────────────────
            ln_wage │      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
────────────────────┼────────────────────────────────────────────────────────────────
           _k_eq_m4 │  -.0426688   .0131367    -3.25   0.001    -.0684177   -.0169199
           _k_eq_m3 │  -.0540115   .0148103    -3.65   0.000    -.0830409   -.0249822
           _k_eq_m2 │  -.0422174   .0133608    -3.16   0.002    -.0684057   -.0160291
           _k_eq_p0 │   .0881427   .0126766     6.95   0.000     .0632956    .1129898
           _k_eq_p1 │   .0839043   .0131147     6.40   0.000     .0581985    .1096101
           _k_eq_p2 │   .0796825   .0137776     5.78   0.000     .0526774    .1066877
           _k_eq_p3 │   .0606217   .0147132     4.12   0.000     .0317825    .0894609
           _k_eq_p4 │   .0283481   .0132207     2.14   0.032     .0024345    .0542618
                age │   .0196494   .0040289     4.88   0.000     .0117524    .0275464
                    │
        c.age#c.age │  -.0005162   .0000599    -8.61   0.000    -.0006337   -.0003988
                    │
            ttl_exp │    .048873   .0036671    13.33   0.000     .0416853    .0560608
                    │
c.ttl_exp#c.ttl_exp │  -.0004775   .0001341    -3.56   0.000    -.0007403   -.0002146
                    │
             tenure │   .0096665   .0009371    10.32   0.000     .0078297    .0115032
                    │
               time │
                 2  │    .058775   .0086904     6.76   0.000      .041741     .075809
                 3  │   .0616701   .0104441     5.90   0.000     .0411988    .0821414
                 4  │   .0645453   .0128146     5.04   0.000     .0394276    .0896631
                 5  │   .0528849    .015525     3.41   0.001     .0224546    .0833153
                 6  │   .0526472   .0185005     2.85   0.004     .0163848    .0889097
                 7  │   .0391945   .0215651     1.82   0.069    -.0030748    .0814638
                 8  │   .0310191     .02451     1.27   0.206    -.0170224    .0790606
                 9  │   .0237829   .0273636     0.87   0.385    -.0298519    .0774177
                10  │   .0110167   .0303628     0.36   0.717    -.0484968    .0705302
                11  │   .0005248    .033287     0.02   0.987    -.0647205    .0657702
                12  │  -.0044624   .0361144    -0.12   0.902    -.0752496    .0663248
                13  │  -.0209216   .0395187    -0.53   0.597    -.0983816    .0565383
                14  │   .0063342   .0439576     0.14   0.885    -.0798264    .0924947
                15  │  -.0069669   .0515434    -0.14   0.892    -.1079961    .0940623
                    │
              _cons │   1.224197    .061415    19.93   0.000     1.103819    1.344575
────────────────────┴────────────────────────────────────────────────────────────────
F test of absorbed indicators: F(2693, 20156) = 10.075        Prob > F = 0.000
</pre>
<p>Compare the original <em>policyvar</em> and the imputed
<em>policyvar</em> for unit 2.</p>
<pre class='stata'>. list idcode time union2 union2_imputed if idcode==2, noobs

  ┌───────────────────────────────────┐
  │ idcode   time   union2   union2~d │
  ├───────────────────────────────────┤
  │      2      1        .          0 │
  │      2      2        0          0 │
  │      2      3        0          0 │
  │      2      4        0          0 │
  │      2      5        1          1 │
  ├───────────────────────────────────┤
  │      2      6        1          1 │
  │      2      7        1          1 │
  │      2      8        .          . │
  │      2      9        .          . │
  │      2     10        1          1 │
  ├───────────────────────────────────┤
  │      2     11        .          1 │
  │      2     12        .          1 │
  └───────────────────────────────────┘
</pre>
<p>Drop the imputed <em>policyvar</em>.</p>
<pre class='stata'>. drop union2_imputed
</pre>
<h4 id="stag">stag</h4>
<p>Now, let’s estimate an event-study imputing outer missing values in
the <em>policyvar</em> verifying staggered-adoption, i.e., according to
<strong>stag</strong>, and save the imputed <em>policyvar</em>.</p>
<pre class='stata'>. xtevent ln_w age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure , ///
>             policyvar(union2) window(3) impute(stag, saveimp)

Using options panelvar and timevar from xtset

No proxy or instruments provided. Implementing OLS estimator

Linear regression, absorbing indicators         Number of obs     =     22,877
Absorbed variable: idcode                       No. of categories =      2,694
                                                F(  27,  20156)   =     174.19
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6701
                                                Adj R-squared     =     0.6256
                                                Root MSE          =     0.2851

────────────────────┬────────────────────────────────────────────────────────────────
            ln_wage │      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
────────────────────┼────────────────────────────────────────────────────────────────
           _k_eq_m4 │  -.0426688   .0131367    -3.25   0.001    -.0684177   -.0169199
           _k_eq_m3 │  -.0540115   .0148103    -3.65   0.000    -.0830409   -.0249822
           _k_eq_m2 │  -.0422174   .0133608    -3.16   0.002    -.0684057   -.0160291
           _k_eq_p0 │   .0881427   .0126766     6.95   0.000     .0632956    .1129898
           _k_eq_p1 │   .0839043   .0131147     6.40   0.000     .0581985    .1096101
           _k_eq_p2 │   .0796825   .0137776     5.78   0.000     .0526774    .1066877
           _k_eq_p3 │   .0606217   .0147132     4.12   0.000     .0317825    .0894609
           _k_eq_p4 │   .0283481   .0132207     2.14   0.032     .0024345    .0542618
                age │   .0196494   .0040289     4.88   0.000     .0117524    .0275464
                    │
        c.age#c.age │  -.0005162   .0000599    -8.61   0.000    -.0006337   -.0003988
                    │
            ttl_exp │    .048873   .0036671    13.33   0.000     .0416853    .0560608
                    │
c.ttl_exp#c.ttl_exp │  -.0004775   .0001341    -3.56   0.000    -.0007403   -.0002146
                    │
             tenure │   .0096665   .0009371    10.32   0.000     .0078297    .0115032
                    │
               time │
                 2  │    .058775   .0086904     6.76   0.000      .041741     .075809
                 3  │   .0616701   .0104441     5.90   0.000     .0411988    .0821414
                 4  │   .0645453   .0128146     5.04   0.000     .0394276    .0896631
                 5  │   .0528849    .015525     3.41   0.001     .0224546    .0833153
                 6  │   .0526472   .0185005     2.85   0.004     .0163848    .0889097
                 7  │   .0391945   .0215651     1.82   0.069    -.0030748    .0814638
                 8  │   .0310191     .02451     1.27   0.206    -.0170224    .0790606
                 9  │   .0237829   .0273636     0.87   0.385    -.0298519    .0774177
                10  │   .0110167   .0303628     0.36   0.717    -.0484968    .0705302
                11  │   .0005248    .033287     0.02   0.987    -.0647205    .0657702
                12  │  -.0044624   .0361144    -0.12   0.902    -.0752496    .0663248
                13  │  -.0209216   .0395187    -0.53   0.597    -.0983816    .0565383
                14  │   .0063342   .0439576     0.14   0.885    -.0798264    .0924947
                15  │  -.0069669   .0515434    -0.14   0.892    -.1079961    .0940623
                    │
              _cons │   1.224197    .061415    19.93   0.000     1.103819    1.344575
────────────────────┴────────────────────────────────────────────────────────────────
F test of absorbed indicators: F(2693, 20156) = 10.075        Prob > F = 0.000
</pre>
<p>Compare the original <em>policyvar</em> and the imputed
<em>policyvar</em> for unit 2.</p>
<pre class='stata'>. list idcode time union2 union2_imputed if idcode==2, noobs

  ┌───────────────────────────────────┐
  │ idcode   time   union2   union2~d │
  ├───────────────────────────────────┤
  │      2      1        .          0 │
  │      2      2        0          0 │
  │      2      3        0          0 │
  │      2      4        0          0 │
  │      2      5        1          1 │
  ├───────────────────────────────────┤
  │      2      6        1          1 │
  │      2      7        1          1 │
  │      2      8        .          . │
  │      2      9        .          . │
  │      2     10        1          1 │
  ├───────────────────────────────────┤
  │      2     11        .          1 │
  │      2     12        .          1 │
  └───────────────────────────────────┘
</pre>
<p>Drop the imputed <em>policyvar</em>.</p>
<pre class='stata'>. drop union2_imputed
</pre>
<h4 id="instag">instag</h4>
<p>Now, let’s estimate an event-study imputing outer and inner missing
values in the <em>policyvar</em> verifying staggered-adoption, i.e.,
according to <strong>instag</strong>, and save the imputed
<em>policyvar</em>.</p>
<pre class='stata'>. xtevent ln_w age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure , ///
>     policyvar(union2) window(3) impute(instag, saveimp)

Using options panelvar and timevar from xtset

No proxy or instruments provided. Implementing OLS estimator

Linear regression, absorbing indicators         Number of obs     =     22,885
Absorbed variable: idcode                       No. of categories =      2,694
                                                F(  27,  20164)   =     174.37
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6701
                                                Adj R-squared     =     0.6256
                                                Root MSE          =     0.2850

────────────────────┬────────────────────────────────────────────────────────────────
            ln_wage │      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
────────────────────┼────────────────────────────────────────────────────────────────
           _k_eq_m4 │  -.0426694    .013134    -3.25   0.001    -.0684132   -.0169256
           _k_eq_m3 │  -.0539937   .0148069    -3.65   0.000    -.0830165   -.0249709
           _k_eq_m2 │  -.0422109   .0133581    -3.16   0.002     -.068394   -.0160279
           _k_eq_p0 │   .0881611   .0126701     6.96   0.000     .0633266    .1129956
           _k_eq_p1 │   .0838372   .0131075     6.40   0.000     .0581453     .109529
           _k_eq_p2 │   .0795712   .0137695     5.78   0.000     .0525819    .1065604
           _k_eq_p3 │   .0605613   .0147034     4.12   0.000     .0317414    .0893812
           _k_eq_p4 │   .0283394   .0132114     2.15   0.032      .002444    .0542349
                age │   .0196417   .0040278     4.88   0.000     .0117468    .0275366
                    │
        c.age#c.age │  -.0005161   .0000599    -8.61   0.000    -.0006335   -.0003987
                    │
            ttl_exp │   .0488691   .0036658    13.33   0.000     .0416839    .0560543
                    │
c.ttl_exp#c.ttl_exp │  -.0004773   .0001341    -3.56   0.000    -.0007401   -.0002145
                    │
             tenure │    .009665   .0009366    10.32   0.000     .0078292    .0115007
                    │
               time │
                 2  │   .0587788   .0086886     6.77   0.000     .0417485    .0758091
                 3  │   .0616812   .0104416     5.91   0.000     .0412148    .0821476
                 4  │   .0645673   .0128114     5.04   0.000     .0394559    .0896786
                 5  │     .05292   .0155204     3.41   0.001     .0224988    .0833411
                 6  │   .0526476   .0184946     2.85   0.004     .0163967    .0888985
                 7  │    .039172   .0215588     1.82   0.069     -.003085    .0814289
                 8  │   .0310151   .0245032     1.27   0.206    -.0170132    .0790433
                 9  │   .0238217   .0273557     0.87   0.384    -.0297976    .0774411
                10  │   .0110269   .0303544     0.36   0.716    -.0484701     .070524
                11  │    .000538   .0332784     0.02   0.987    -.0646903    .0657663
                12  │  -.0044897   .0361042    -0.12   0.901    -.0752568    .0662774
                13  │  -.0209286   .0395095    -0.53   0.596    -.0983704    .0565132
                14  │   .0063175   .0439478     0.14   0.886    -.0798237    .0924588
                15  │  -.0069889   .0515324    -0.14   0.892    -.1079966    .0940188
                    │
              _cons │   1.224299   .0613977    19.94   0.000     1.103954    1.344643
────────────────────┴────────────────────────────────────────────────────────────────
F test of absorbed indicators: F(2693, 20164) = 10.079        Prob > F = 0.000
</pre>
<p>Compare the original <em>policyvar</em> and the imputed
<em>policyvar</em> for unit 2.</p>
<pre class='stata'>. list idcode time union2 union2_imputed if idcode==2, noobs

  ┌───────────────────────────────────┐
  │ idcode   time   union2   union2~d │
  ├───────────────────────────────────┤
  │      2      1        .          0 │
  │      2      2        0          0 │
  │      2      3        0          0 │
  │      2      4        0          0 │
  │      2      5        1          1 │
  ├───────────────────────────────────┤
  │      2      6        1          1 │
  │      2      7        1          1 │
  │      2      8        .          1 │
  │      2      9        .          1 │
  │      2     10        1          1 │
  ├───────────────────────────────────┤
  │      2     11        .          1 │
  │      2     12        .          1 │
  └───────────────────────────────────┘
</pre>
<h2 id="how-the-imputation-works-on-the-event-time-dummies">How the
imputation works on the event-time dummies</h2>
<p>Finally, let’s see how the imputation works on the event-time
dummies. First, we differentiate the <em>policyvar</em>.</p>
<pre class='stata'>. gen union2_d=d.union2
(4,717 missing values generated)
</pre>
<p>Estimate an event-study without imputing the <em>policyvar</em> and
save the event-time dummies by the <em>savek</em> option.</p>
<pre class='stata'>. xtevent ln_w age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure , ///
>     policyvar(union2) window(3) savek(vv)

Using options panelvar and timevar from xtset

No proxy or instruments provided. Implementing OLS estimator

Linear regression, absorbing indicators         Number of obs     =      5,629
Absorbed variable: idcode                       No. of categories =      1,589
                                                F(  20,   4020)   =      16.56
                                                Prob > F          =     0.0000
                                                R-squared         =     0.8039
                                                Adj R-squared     =     0.7255
                                                Root MSE          =     0.2158

────────────────────┬────────────────────────────────────────────────────────────────
            ln_wage │      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
────────────────────┼────────────────────────────────────────────────────────────────
           _k_eq_m4 │   -.043966   .0269874    -1.63   0.103    -.0968762    .0089442
           _k_eq_m3 │  -.0415434   .0246832    -1.68   0.092    -.0899362    .0068495
           _k_eq_m2 │  -.0483384   .0221456    -2.18   0.029     -.091756   -.0049208
           _k_eq_p0 │   .0409026   .0215966     1.89   0.058    -.0014386    .0832439
           _k_eq_p1 │   .0178648   .0228461     0.78   0.434    -.0269262    .0626557
           _k_eq_p2 │   .0257693   .0247226     1.04   0.297    -.0227007    .0742394
           _k_eq_p3 │   .0125174   .0275682     0.45   0.650    -.0415316    .0665664
           _k_eq_p4 │  -.0131412   .0300731    -0.44   0.662    -.0721011    .0458186
                age │  -.0092482   .0146948    -0.63   0.529    -.0380582    .0195619
                    │
        c.age#c.age │   -.000205   .0002251    -0.91   0.363    -.0006463    .0002363
                    │
            ttl_exp │   .0419136   .0107666     3.89   0.000     .0208052    .0630221
                    │
c.ttl_exp#c.ttl_exp │  -.0006619   .0004468    -1.48   0.139    -.0015379    .0002142
                    │
             tenure │   .0077222   .0019094     4.04   0.000     .0039788    .0114657
                    │
               time │
                 6  │   .0286525    .013708     2.09   0.037     .0017773    .0555278
                 7  │   .0389628   .0242012     1.61   0.107     -.008485    .0864105
                 8  │   .0690636   .0346343     1.99   0.046     .0011612     .136966
                 9  │   .0936788   .0443348     2.11   0.035     .0067581    .1805995
                10  │   .0970093    .055501     1.75   0.081    -.0118035    .2058221
                11  │    .117309   .0662891     1.77   0.077    -.0126544    .2472723
                12  │   .1389331   .0757329     1.83   0.067    -.0095453    .2874115
                    │
              _cons │   1.883213   .2462565     7.65   0.000     1.400414    2.366013
────────────────────┴────────────────────────────────────────────────────────────────
F test of absorbed indicators: F(1588, 4020) = 8.341          Prob > F = 0.000
</pre>
<p>Now, let’s see some of the event-time dummies for a unit. We can
verify that this set of event-time dummies correspond to different leads
of the differentiated <em>policyvar</em> (see equation 2 in <a
href="https://www.nber.org/papers/w29170">Freyaldenhoven et
al. (2021)</a>).</p>
<pre class='stata'>. list idcode time union2 union2_d vv_eq_m4 vv_eq_m3 vv_eq_m2 vv_eq_m1 if idcode==24, noobs

  ┌───────────────────────────────────────────────────────────────────────────────┐
  │ idcode   time   union2   union2_d   vv_eq_m4   vv_eq_m3   vv_eq_m2   vv_eq_m1 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24      1        0          .          1          0          0          0 │
  │     24      2        0          0          1          0          0          0 │
  │     24      3        0          0          1          0          0          0 │
  │     24      4        0          0          1          0          0          0 │
  │     24      5        0          0          1          0          0          0 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24      6        0          0          1          0          0          0 │
  │     24      7        0          0          0          1          0          0 │
  │     24      8        0          0          0          0          1          0 │
  │     24      9        0          0          0          0          0          1 │
  │     24     10        1          1          0          0          0          0 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24     11        1          0          0          0          0          0 │
  │     24     12        1          0          0          0          0          0 │
  │     24     13        1          0          .          .          0          0 │
  │     24     14        1          0          .          .          .          0 │
  │     24     15        1          0          .          .          .          . │
  └───────────────────────────────────────────────────────────────────────────────┘
</pre>
<p>Drop the event-time dummies.</p>
<pre class='stata'>. drop vv*
</pre>
<p>Estimate the same model, but indicating to impute according to
<strong>stag</strong>.</p>
<pre class='stata'>. xtevent ln_w age c.age#c.age ttl_exp c.ttl_exp#c.ttl_exp tenure , ///
> policyvar(union2) window(3) savek(vv) impute(stag)

Using options panelvar and timevar from xtset

No proxy or instruments provided. Implementing OLS estimator

Linear regression, absorbing indicators         Number of obs     =     22,877
Absorbed variable: idcode                       No. of categories =      2,694
                                                F(  27,  20156)   =     174.19
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6701
                                                Adj R-squared     =     0.6256
                                                Root MSE          =     0.2851

────────────────────┬────────────────────────────────────────────────────────────────
            ln_wage │      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
────────────────────┼────────────────────────────────────────────────────────────────
           _k_eq_m4 │  -.0426688   .0131367    -3.25   0.001    -.0684177   -.0169199
           _k_eq_m3 │  -.0540115   .0148103    -3.65   0.000    -.0830409   -.0249822
           _k_eq_m2 │  -.0422174   .0133608    -3.16   0.002    -.0684057   -.0160291
           _k_eq_p0 │   .0881427   .0126766     6.95   0.000     .0632956    .1129898
           _k_eq_p1 │   .0839043   .0131147     6.40   0.000     .0581985    .1096101
           _k_eq_p2 │   .0796825   .0137776     5.78   0.000     .0526774    .1066877
           _k_eq_p3 │   .0606217   .0147132     4.12   0.000     .0317825    .0894609
           _k_eq_p4 │   .0283481   .0132207     2.14   0.032     .0024345    .0542618
                age │   .0196494   .0040289     4.88   0.000     .0117524    .0275464
                    │
        c.age#c.age │  -.0005162   .0000599    -8.61   0.000    -.0006337   -.0003988
                    │
            ttl_exp │    .048873   .0036671    13.33   0.000     .0416853    .0560608
                    │
c.ttl_exp#c.ttl_exp │  -.0004775   .0001341    -3.56   0.000    -.0007403   -.0002146
                    │
             tenure │   .0096665   .0009371    10.32   0.000     .0078297    .0115032
                    │
               time │
                 2  │    .058775   .0086904     6.76   0.000      .041741     .075809
                 3  │   .0616701   .0104441     5.90   0.000     .0411988    .0821414
                 4  │   .0645453   .0128146     5.04   0.000     .0394276    .0896631
                 5  │   .0528849    .015525     3.41   0.001     .0224546    .0833153
                 6  │   .0526472   .0185005     2.85   0.004     .0163848    .0889097
                 7  │   .0391945   .0215651     1.82   0.069    -.0030748    .0814638
                 8  │   .0310191     .02451     1.27   0.206    -.0170224    .0790606
                 9  │   .0237829   .0273636     0.87   0.385    -.0298519    .0774177
                10  │   .0110167   .0303628     0.36   0.717    -.0484968    .0705302
                11  │   .0005248    .033287     0.02   0.987    -.0647205    .0657702
                12  │  -.0044624   .0361144    -0.12   0.902    -.0752496    .0663248
                13  │  -.0209216   .0395187    -0.53   0.597    -.0983816    .0565383
                14  │   .0063342   .0439576     0.14   0.885    -.0798264    .0924947
                15  │  -.0069669   .0515434    -0.14   0.892    -.1079961    .0940623
                    │
              _cons │   1.224197    .061415    19.93   0.000     1.103819    1.344575
────────────────────┴────────────────────────────────────────────────────────────────
F test of absorbed indicators: F(2693, 20156) = 10.075        Prob > F = 0.000
</pre>
<p>Now, let’s see some of the event-time dummies for the same unit. We
can verify that the event-time dummies have been imputed despite of the
<em>policyvar</em> not having missing values in its observed data range.
This happens because the imputation works on both the observed and the
unobserved data range of the <em>policyvar</em>.</p>
<pre class='stata'>. list idcode time union2 union2_d vv_eq_m4 vv_eq_m3 vv_eq_m2 vv_eq_m1 if idcode==24, noobs

  ┌───────────────────────────────────────────────────────────────────────────────┐
  │ idcode   time   union2   union2_d   vv_eq_m4   vv_eq_m3   vv_eq_m2   vv_eq_m1 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24      1        0          .          1          0          0          0 │
  │     24      2        0          0          1          0          0          0 │
  │     24      3        0          0          1          0          0          0 │
  │     24      4        0          0          1          0          0          0 │
  │     24      5        0          0          1          0          0          0 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24      6        0          0          1          0          0          0 │
  │     24      7        0          0          0          1          0          0 │
  │     24      8        0          0          0          0          1          0 │
  │     24      9        0          0          0          0          0          1 │
  │     24     10        1          1          0          0          0          0 │
  ├───────────────────────────────────────────────────────────────────────────────┤
  │     24     11        1          0          0          0          0          0 │
  │     24     12        1          0          0          0          0          0 │
  │     24     13        1          0          0          0          0          0 │
  │     24     14        1          0          0          0          0          0 │
  │     24     15        1          0          0          0          0          0 │
  └───────────────────────────────────────────────────────────────────────────────┘
</pre>
</body>
</html>
